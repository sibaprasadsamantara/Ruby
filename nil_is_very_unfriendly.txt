class User
  def first_name
    self.first_name
  end
end

require 'ostruct'

user = OpenStruct.new(first_name: "Siba", last_name: "Prasad")
user1 = OpenStruct.new

user.first_name.upcase
=> "SIBA"
user1.first_name.upcase
NoMethodError: undefined method `upcase' for nil:NilClass


The user1 object does not attribute called first_name that's the reason we are getting above error here.

What is the possible solution here

Solution 1:

  We can add condition here to call the upcase method i.e 

    user1.first_name.upcase if user1.first_name
    
    If nil will evaluate the false and upcase method won't be called here

 Disadvantages :

   This will lead to structural duplication 

Solution 2:

  NilClass.class_eval do
     def nil.upcase
       "Empty user"
     end
   end

  Advantages:

    We have given object to take a decission how to respond to the upcase method.
    It's an object oriented way
    Following Tell don't ask principle
    Generic way of handling the nil case 
    Implementation of polymorphism

  Disadvantages
    Always the interface should be in sync
    We have reopened the class in run time and deifned the method 
      
